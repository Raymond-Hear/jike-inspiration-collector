# 即刻灵感收集器 - 测试指南

> 版本：v1.0 MVP
> 测试时间：2025-01-07

---

## 📋 测试前准备

### 1. 加载扩展到 Chrome

1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 打开右上角 **"开发者模式"**
4. 点击 **"加载已解压的扩展程序"**
5. 选择项目文件夹：`D:\TraeCode\Jike_AIplugin`
6. 确认扩展成功加载，查看浏览器工具栏是否出现扩展图标

### 2. 打开即刻网站

访问以下任一地址：
- `https://web.okjike.com/`
- `https://okjk.co/`

---

## 🧪 功能测试清单

### 测试 1：按钮注入

**测试目标**：验证 [💡 灵感] 按钮是否正确注入到动态中

**测试步骤**：
1. 打开即刻首页，浏览动态流
2. 检查每条动态底部是否出现 [💡 灵感] 按钮
3. 检查按钮样式（紫色渐变背景，hover 效果）
4. 滚动页面，检查新加载的动态是否也有按钮

**预期结果**：
- ✅ 每条动态都有 [💡 灵感] 按钮
- ✅ 按钮位置合理（在点赞、评论按钮旁边）
- ✅ 按钮样式正常（hover 有视觉反馈）
- ✅ 动态加载的新内容也有按钮

**可能问题**：
- ❌ 按钮没有出现 → 检查 content.js 的 DOM 选择器
- ❌ 按钮位置错乱 → 检查 styles.css 样式
- ❌ 新动态没有按钮 → 检查 MutationObserver 是否工作

---

### 测试 2：收集功能

**测试目标**：验证能否成功收集灵感

**测试步骤**：
1. 点击某条动态的 [💡 灵感] 按钮
2. 检查弹窗是否出现
3. 检查弹窗中显示的内容（动态正文、作者信息）
4. 选择分类类型（需求洞察 / 干货分享 / 洞见思考）
5. 输入笔记（例如："很好的选题方向"）
6. 点击 **"收集灵感"** 按钮
7. 检查是否显示成功提示

**预期结果**：
- ✅ 弹窗正常弹出，有动画效果
- ✅ 动态内容和作者信息正确提取
- ✅ URL 正确提取
- ✅ 分类选择单选框正常
- ✅ 笔记输入框可以输入
- ✅ 点击"收集灵感"后显示成功提示
- ✅ 弹窗自动关闭

**可能问题**：
- ❌ 弹窗没有出现 → 检查 createModal() 函数
- ❌ 内容提取错误 → 检查 extractPostData() 函数
- ❌ 保存失败 → 检查 chrome.storage.local 是否工作
- ❌ 提示不显示 → 检查 showNotification() 函数

---

### 测试 3：管理界面

**测试目标**：验证 popup 管理界面是否正常显示

**测试步骤**：
1. 点击浏览器工具栏的扩展图标
2. 检查 popup 弹窗是否打开
3. 检查统计数据（总收集数、各类型数量）
4. 检查灵感列表是否显示
5. 检查每个灵感卡片的内容

**预期结果**：
- ✅ Popup 正常弹出
- ✅ 统计数据正确显示
- ✅ 灵感列表按时间倒序排列
- ✅ 每个卡片显示：类型标签、日期、内容、笔记、作者、操作按钮
- ✅ 样式美观，与即刻风格一致

**可能问题**：
- ❌ Popup 不显示 → 检查 manifest.json 的 default_popup 配置
- ❌ 数据不显示 → 检查 popup.js 的 loadInspirations() 函数
- ❌ 样式错乱 → 检查 popup.html 中的 CSS

---

### 测试 4：筛选和搜索

**测试目标**：验证筛选和搜索功能是否正常

**测试步骤**：
1. 在 popup 中点击 **"全部"**、**"需求洞察"**、**"干货分享"**、**"洞见思考"** 按钮
2. 检查列表是否正确过滤
3. 在搜索框输入关键词（例如："AI"）
4. 检查是否正确搜索内容和笔记

**预期结果**：
- ✅ 筛选按钮点击后高亮显示
- ✅ 列表正确过滤显示对应类型
- ✅ 搜索框输入时实时搜索
- ✅ 搜索匹配内容和笔记字段
- ✅ 搜索和筛选可以同时生效

**可能问题**：
- ❌ 筛选不工作 → 检查 currentFilter 逻辑
- ❌ 搜索不工作 → 检查 searchQuery 逻辑
- ❌ 组合失效 → 检查过滤条件的 AND 逻辑

---

### 测试 5：删除功能

**测试目标**：验证删除灵感是否正常

**测试步骤**：
1. 在 popup 的灵感卡片中点击 **"删除"** 按钮
2. 检查是否出现确认对话框
3. 点击 **"确定"**
4. 检查灵感是否被删除
5. 检查统计数据是否更新

**预期结果**：
- ✅ 删除按钮正常工作
- ✅ 确认对话框正确显示
- ✅ 删除后列表更新
- ✅ 统计数据同步更新

**可能问题**：
- ❌ 删除不工作 → 检查 deleteInspiration() 函数
- ❌ 统计不更新 → 检查 updateStats() 函数

---

### 测试 6：导出 Markdown

**测试目标**：验证导出为 Markdown 格式是否正常

**测试步骤**：
1. 在 popup 中点击 **"📄 导出Markdown"** 按钮
2. 检查是否触发下载
3. 打开下载的 `.md` 文件
4. 检查文件格式和内容

**预期结果**：
- ✅ 文件成功下载
- ✅ 文件名格式：`即刻灵感_YYYY-MM-DD.md`
- ✅ Markdown 格式正确
- ✅ 内容完整（标题、元数据、正文）
- ✅ 按类型分组显示

**可能问题**：
- ❌ 下载失败 → 检查 downloads 权限和 downloadFile() 函数
- ❌ 格式错误 → 检查 exportMarkdown() 函数

---

### 测试 7：导出 JSON

**测试目标**：验证导出为 JSON 格式是否正常

**测试步骤**：
1. 在 popup 中点击 **"📋 导出JSON"** 按钮
2. 检查是否触发下载
3. 打开下载的 `.json` 文件
4. 检查 JSON 格式和数据完整性

**预期结果**：
- ✅ 文件成功下载
- ✅ 文件名格式：`即刻灵感_YYYY-MM-DD.json`
- ✅ JSON 格式正确（可解析）
- ✅ 数据完整（包含所有字段）
- ✅ 格式化输出（2 空格缩进）

**可能问题**：
- ❌ 下载失败 → 检查 downloads 权限
- ❌ JSON 格式错误 → 检查 exportJSON() 函数

---

### 测试 8：清空功能

**测试目标**：验证清空所有灵感是否正常

**测试步骤**：
1. 在 popup 中点击 **"🗑️ 清空"** 按钮
2. 检查是否出现确认对话框
3. 点击 **"确定"**
4. 检查所有数据是否被清空
5. 检查统计是否归零

**预期结果**：
- ✅ 确认对话框显示
- ✅ 清空后列表为空
- ✅ 统计显示 "共收集 0 条"
- ✅ 提示"已清空所有灵感"

**可能问题**：
- ❌ 清空失败 → 检查 chrome.storage.local.set() 调用
- ❌ 界面不更新 → 检查 loadInspirations() 和 updateStats()

---

### 测试 9：持久化存储

**测试目标**：验证数据是否在关闭浏览器后仍然保存

**测试步骤**：
1. 收集几条灵感
2. 关闭浏览器
3. 重新打开浏览器
4. 打开 popup 管理界面
5. 检查数据是否仍然存在

**预期结果**：
- ✅ 数据持久化保存
- ✅ 重新打开后数据完整
- ✅ 统计数据正确

**可能问题**：
- ❌ 数据丢失 → 检查是否使用了 chrome.storage.local（而非 sessionStorage）

---

### 测试 10：边界情况

**测试目标**：测试特殊情况和边界条件

**测试步骤**：
1. **空数据**：在没有收集任何灵感时打开 popup
   - 预期：显示 "没有找到相关灵感"
2. **长内容**：收集一条超长动态（超过 1000 字）
   - 预期：正常显示，样式不乱
3. **特殊字符**：收集包含 emoji、特殊符号的动态
   - 预期：正常保存和显示
4. **快速点击**：快速多次点击 [💡 灵感] 按钮
   - 预期：不会重复打开多个弹窗
5. **网络断开**：在离线状态下收集灵感
   - 预期：正常工作（数据存储在本地）

**预期结果**：
- ✅ 所有边界情况都能正常处理
- ✅ 没有报错或崩溃

**可能问题**：
- ❌ 空数据显示错误 → 检查 empty-state 逻辑
- ❌ 长内容样式错乱 → 检查 CSS 的 text-overflow 和 word-wrap
- ❌ 特殊字符转义错误 → 检查 HTML 转义逻辑
- ❌ 重复弹窗 → 检查 createModal() 的防重复逻辑

---

## 📊 测试结果记录

| 测试项 | 状态 | 备注 |
|-------|------|------|
| 测试 1：按钮注入 | ⬜ 通过 / ❌ 失败 | |
| 测试 2：收集功能 | ⬜ 通过 / ❌ 失败 | |
| 测试 3：管理界面 | ⬜ 通过 / ❌ 失败 | |
| 测试 4：筛选搜索 | ⬜ 通过 / ❌ 失败 | |
| 测试 5：删除功能 | ⬜ 通过 / ❌ 失败 | |
| 测试 6：导出 Markdown | ⬜ 通过 / ❌ 失败 | |
| 测试 7：导出 JSON | ⬜ 通过 / ❌ 失败 | |
| 测试 8：清空功能 | ⬜ 通过 / ❌ 失败 | |
| 测试 9：持久化存储 | ⬜ 通过 / ❌ 失败 | |
| 测试 10：边界情况 | ⬜ 通过 / ❌ 失败 | |

---

## 🐛 常见问题排查

### 问题 1：扩展无法加载

**症状**：Chrome 提示 "Manifest is not valid JSON"

**解决**：
1. 检查 manifest.json 语法
2. 确保所有引号、逗号正确
3. 使用 JSON 验证工具检查

### 问题 2：按钮没有出现

**症状**：即刻页面没有显示 [💡 灵感] 按钮

**解决**：
1. 打开开发者工具（F12）
2. 切换到 Console 标签
3. 查看是否有 JavaScript 错误
4. 检查 content.js 是否正确注入
5. 尝试刷新页面

### 问题 3：数据无法保存

**症状**：点击"收集灵感"后数据丢失

**解决**：
1. 检查 chrome.storage.local 权限
2. 打开开发者工具 → Application → Storage
3. 查看 Local Storage 数据
4. 检查是否有 saveInspiration 错误

### 问题 4：导出文件下载失败

**症状**：点击导出按钮没有反应

**解决**：
1. 检查 manifest.json 是否有 "downloads" 权限
2. 检查 chrome.downloads.download API 调用
3. 查看是否有错误提示

### 问题 5：Popup 样式错乱

**症状**：管理界面显示不正常

**解决**：
1. 检查 popup.html 的 CSS 样式
2. 确保所有样式标签闭合
3. 检查响应式设计

---

## 📝 测试建议

1. **逐步测试**：按照测试清单顺序逐项测试
2. **记录问题**：发现问题时记录详细步骤和错误信息
3. **多次验证**：每个功能测试多次，确保稳定性
4. **真实场景**：在实际使用场景中测试（浏览即刻、收集灵感）
5. **跨设备测试**：如有条件，在不同设备上测试

---

## 🎯 测试完成标准

所有核心功能（测试 1-9）全部通过，即可认为 MVP 测试完成。

边界测试（测试 10）建议通过，但不阻塞发布。

---

**测试人员**：聆风Raymond
**测试日期**：2025-01-07
**扩展版本**：v1.0.0
